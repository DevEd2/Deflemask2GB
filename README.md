# Deflemask2GB
An alternate Game Boy hardware player for Deflemask.

## Building the Base ROM
In order to build the base ROM, follow these steps:

Windows:
Just run build.bat.

Mac OS X:

1. Make sure you have Xcode installed. If not, you can get it for free from the App Store.

2. Download RGBDS from its [GitHub releases page](https://github.com/rednex/rgbds/releases) and add it to the PATH. 
   Or build and install it from source following [the instructions](https://github.com/rednex/rgbds).

3. Run build.sh in Terminal. If it says "permission denied", then type "chmod 750 build.sh" and try again.

Linux:

1. Run "sudo apt-get install gcc bison git" in whatever terminal emulator you use (make sure you have admin!)

2. Download RGBDS from its [GitHub releases page](https://github.com/rednex/rgbds/releases) and add it to the PATH. 
   Or build and install it from source following [the instructions](https://github.com/rednex/rgbds).

3. Run build.sh. If it says "permission denied", then type "chmod 750 build.sh" and try again. 

## Using the Base ROM
In order to use the base ROM, you need a GBS file generated by [Deflemask](http://www.deflemask.com).

### Method 1 - Use SongInserter:

Windows:
1. Make sure you have gcc installed. You can use [Mingw-w64](http://mingw-w64.org) for this. 

2. Run build.bat in the SongInserter directory 

3. Copy base ROM to SongInserter directory 

4. SongInserter has been built and may now be used.
   
   In PowerShell, from the SongInserter directory, run: 
   ```
   .\SongInserter.exe [output.gb] [your_GBS_file.gbs]
   ..\bin\rgbfix -v -p 255 [output.gb]
   ``` 

Linux/Mac (Untested on Mac): 
1. Make sure you have gcc installed 

2. Run build.sh in the SongInserter directory 

3. Copy base ROM to SongInserter directory 

4. SongInserter has been built and may now be used.
   
   In Bash, from the SongInserter directory, run:
   ```
   ./SongInserter [output.gb] [your_GBS_file.gbs]
   rgbfix -v -p 255 [output.gb]
   ``` 

### Method 2 - Use a hex editor:

Using a hex editor of your choice:

1. Copy the song data from the GBS file (starting at offset 0x70) and insert it into the base ROM at 0x500, making sure not to overwrite or relocate the graphics data at offset 0x7C000.

2. Replace "SONG NAME HERE" at offset 0x7C715 with the song name, making sure it fits within 18 bytes.

3. Replace "AUTHOR HERE" at offset 0x7C729 with the author name, again making sure it fits within 18 bytes.

4. In Windows, from the SongInserter directory, run `..\bin\rgbfix -v -p 255 [your_rom.gb]` in PowerShell. 
   
   Or in Linux/Mac, run `rgbfix -v -p 255 [your_rom.gb]` in Bash. This will fix the cartridge checksum. 

5. Open the ROM in a suitable Game Boy emulator, such as bgb (http://bgb.bircd.org) or Gambatte (https://github.com/sinamas/gambatte). Alternatively, you can run the ROM on real hardware using a flash cart (if you have one).
